<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>To do list</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    />
  </head>
  <body>
    <main class="min-h-screen bg-stone-900">
      {{> nav}}

      <section
        class="max-w-[670px] m-auto rounded flex flex-col mt-12 p-5 gap-5"
      >
        <header class="flex items-center">
          <div
            class="bg-[rgba(72,99,141,0.5)] p-3 pr-5 py-4 w-[8%] rounded-xl hover:scale-[1.02] hover:bg-[rgba(96,130,185,0.5)]"
          >
            <a href="/">
              <button class="text-white text-3xl">
                <i class="fa-solid fa-less-than"></i>
              </button>
            </a>
          </div>
          <div
            class="flex bg-[rgba(72,99,141,0.5)] w-[29%] pt-2 pb-3 px-3 rounded-xl ml-6 items-center hover:bg-[rgba(96,130,185,0.5)] hover:scale-[1.01]"
          >
            <section id="collectionId" data-id="{{collection.id}}">
              <h3 class="font-bold text-xl text-white">{{collection.name}}</h3>
              <p class="text-sm text-slate-400"><span id="completedCount">{{isDoneTasks.length}}</span>/<span id="taskTotalCount">{{tasks.length}}</span> done</p>
            </section>
            <section class="ml-auto">
              <i
                class="fa-solid fa-clock text-3xl font-bold bg-gradient-to-b from-purple-500 via-purple-700 to-purple-400 text-transparent bg-clip-text"
              ></i>
            </section>
          </div>
          <button
            class="bg-orange-800 text-white ml-auto h-1/2 py-2 px-4 rounded-[3rem] hover:scale-[.98] hover:bg-orange-700" id="deleteTask" data-id="{{collection.id}}"
          >
            delete
          </button>
        </header>
        <div class="w-full relative">
          <div
            class="text-lg text-slate-200 bg-pink-600 rounded w-8 flex justify-center items-center py-1 absolute top-2 left-3 cursor-pointer hover:scale-[0.96] hover:bg-pink-500"
            id="addTaskButton"
          >
            <i class="fa-solid fa-plus"></i>
          </div>
          <input
            type="text"
            name="newTask"
            id="newTaskInput"
            class="border-purple-500 border-4 border-solid w-full bg-transparent rounded-xl p-1 pl-12 text-slate-300"
            placeholder="Add a task"
          />
          <div id="emptyInput">
          </div>
        </div>
        <div class="w-full text-white">
          <div>
            {{#if tasks}}
                <h2 class="text-lg font-semibold mb-4">Tasks - <span id="taskCount">{{notDoneTasks.length}}</span></h2>
            {{else}}
                <h2 class="text-lg font-semibold mb-4">Tasks - <span id="taskCount">0</span></h2>
            {{/if}}
            <ul class="space-y-2 tasks">
                {{#if tasks}}
                    {{#each notDoneTasks}}       
              <li
                class="flex items-center justify-between bg-gray-700 rounded-md p-2"
              >
                <span>{{name}}</span>
                <div
                  class="w-6 h-6 border-2 border-purple-500 rounded-md"
                ></div>
              </li>
                    {{/each}}
                {{/if}}
            </ul>
          </div>
          <section class="mt-6 w-full">
            <h2 class="text-lg font-semibold mb-4">Completed - <span id="completedCountHeader">{{isDoneTasks.length}}</span></h2>
            <ul class="space-y-2 completed">
                {{#each isDoneTasks}}   
              <li
                class="flex items-center justify-between bg-gray-700 rounded-md p-2"
              >
                <span class="line-through text-gray-400">{{name}}</span>
                <div
                  class="w-6 h-6 bg-purple-500 rounded-md flex items-center justify-center"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-4 h-4 text-white"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                </div>
              </li>
                {{/each}}
            </ul>
          </section>
        </div>
      </section>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="/assets/js/alert-modal.js"></script>
    <script type="module" src="/js/navbar.js"></script>
    <script src="/js/task.js" type="module"></script>
  </body>
</html>
